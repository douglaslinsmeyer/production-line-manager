[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Use Arduino ESP32 core 3.x for W5500 support
platform_packages =
    framework-arduinoespressif32 @ https://github.com/espressif/arduino-esp32.git#3.0.2
    framework-arduinoespressif32-libs @ https://github.com/espressif/arduino-esp32/releases/download/3.0.2/esp32-arduino-libs-3.0.2.zip

; ESP32-S3 configuration
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.flash_mode = dio
board_build.flash_size = 16MB
board_build.psram_type = opi

; Upload and monitor settings
upload_speed = 921600
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags - defines all pin mappings
build_flags =
    -DCORE_DEBUG_LEVEL=4
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    ; Enable ETH support in SDK
    -DCONFIG_ETH_ENABLED=1
    -DCONFIG_ETH_USE_SPI_ETHERNET=1
    ; W5500 Ethernet pins
    -DETH_PHY_TYPE=ETH_PHY_W5500
    -DETH_PHY_ADDR=1
    -DETH_PHY_CS=16
    -DETH_PHY_IRQ=12
    -DETH_PHY_RST=39
    -DETH_SPI_SCK=15
    -DETH_SPI_MISO=14
    -DETH_SPI_MOSI=13
    ; Digital Input pins
    -DDIN_PIN_1=4
    -DDIN_PIN_2=5
    -DDIN_PIN_3=6
    -DDIN_PIN_4=7
    -DDIN_PIN_5=8
    -DDIN_PIN_6=9
    -DDIN_PIN_7=10
    -DDIN_PIN_8=11
    ; I2C pins for TCA9554PWR GPIO expander
    -DI2C_SDA_PIN=42
    -DI2C_SCL_PIN=41
    -DTCA9554_ADDRESS=0x20
    ; Additional GPIO definitions
    -DGPIO_RGB_LED=38
    -DGPIO_BUZZER=46
    ; MQTT buffer size
    -DMQTT_MAX_PACKET_SIZE=512
    ; Boot button configuration
    -DBOOT_BUTTON_PIN=0
    -DBOOT_BUTTON_LONG_PRESS=15000
    ; WiFi configuration
    -DWIFI_AP_CHANNEL=6
    -DWIFI_AP_MAX_CONNECTIONS=4
    -DWIFI_CONNECTION_TIMEOUT=30000
    -DWIFI_RECONNECT_MAX_ATTEMPTS=10

; Required libraries
lib_deps =
    knolleary/PubSubClient@^2.8
    bblanchon/ArduinoJson@^7.0.0
    arduino-libraries/NTPClient@^3.2.1
